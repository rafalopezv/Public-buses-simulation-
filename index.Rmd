---
title: 
output: 
  revealjs::revealjs_presentation:
    transition: slide
---
```{r, echo=F, warning=FALSE, error=FALSE, include=FALSE}
source("pumas.stats.R")
```

## {data-background=#CBF6FF}  
<h6>Puma Kataris & Big Data</h6>
<img src="img/bus2.png" style="background:none; border:none; box-shadow:none;" height="500" width="500px">
<br>
<small><h6>Rafael López V.</h6></small>

##
<h6>Antecedentes: 1er sistema de transporte urbano en Bolivia</h6>
<br>
<img src="img/antecedentes.png" style="background:none; border:none; box-shadow:none;" height="448px" width="500px">

<br>
<small><small>Ver mas en: [lapazbus.bo](http://www.lapazbus.bo) </small></small>

## {data-background=#CBF6FF}  
<br>
<br>

<h2><center>Objetivos: 

Mostrar que conectando los buses al Big Data en tiempo real, puede mejorarse el servicio</center></h2>

## {data-background=#CBF6FF}  
<h2><center>Para lograr el objetivo: 

<br>
Se han simulado casi 700 mil datos sobre el recorrido de los buses 

La simulación intenta acercase a la realidad de manera precisa

<img width="60" height="60" src="img/codigo.png" style="background:none; border:none; box-shadow:none;">

## {data-background=#CBF6FF}  
<br>
<br>
<br>
<br>
<h2><center>Alcances de la simulación</center></h2>

## Se eligió 1 de las 6 rutas
<br>
<br>
<img src="img/ruta1.png" style="background:none; border:none; box-shadow:none;" height="350px" width="600px">

## Se eligió la dirección: Camacho-Calle 63
<br>
<br>
<img src="img/direccion.png" style="background:none; border:none; box-shadow:none;">

## 
<h4>Se tomaron los tiempos en 5 recorridos en horas normales (sin tráfico, protestas, etc)</h4>
<br>
<img src="img/tiempo.png" style="background:none; border:none; box-shadow:none;">

## 
<h3>En la simulación, se introdujeron alteraciones a la normalidad</h3>

<br>

<h3>- Paradas con más gente que otras

- Tramos mas lentos que otros: tráfico vehicular

- Marchas y bloqueos en el centro de la ciudad 

- Horas pico que afectan los tiempos en los tramos</h3>

## 
<h4>Se supuso que los buses al pasar por las paradas generan automáticamente los datos<h4>
<img src="img/info.png" style="background:none; border:none; box-shadow:none;">

## 
<br>
<br>
<br>
<br>
<center><h2>Se computaron los intervalos [oficiales](http://www.lapazbus.bo/horarios/3/) de partida y con todo  lo anterior se simularon mas de 680 mil datos en [R](https://www.r-project.org)</center></h2>
<img width="60" height="60" src="img/codigo.png" style="background:none; border:none; box-shadow:none;">

##
<h4>Muestra de la simulación en R</h4>
<iframe width="1200" height="650" src="https://www.youtube.com/embed/iAGTwDc71rk?rel=0&amp;controls=0&amp;showinfo=0;autoplay=1" frameborder="0" allowfullscreen></iframe>

##{data-background=#CBF6FF}  
<br>
<br>
<br>
<br>
<center><h2>Resultados de la simulación</center></h2>

##
<br>
<br>
<img width="600" height="400" src="img/datos1.png" style="background:none; border:none; box-shadow:none;">

##{data-background=#CBF6FF}
<br>
<br>
<br>
<center><h2>Estadísticas: 

El servicio se monitoreará de la siguiente manera</center></h2>

## 
```{r, echo=FALSE}
b
```
<br>
<left><small> - 97% de los viajes  están entre 52 y 60 minutos desde la primera hasta la última parada </small></left>
<br>
<left><small> - Sin embargo, a veces los buses tardan hasta 175 minutos (casi 3 horas)</small></left>
<br>
<left><small> - Veamos qué días y a qué horas se producen los mayores atrasos</small></left>

## 
```{r, echo=FALSE, include=TRUE}
d
```
<br>
<left><small> - Los 4 picos muestran atrasos por protestas sociales  </small></left>
<br>
<left><small> - ¿En qué tramos están las protestas?</small></left>

##
```{r, echo=FALSE, include=TRUE}
f
```
<br>
<left><small> - Los tramos entre las paradas 1 y 4 son los menos regulares. Los mayores  atrasos se generan allí</small></left>
<br>
<left><small> - Veamos en detalle estos tramos, sabiendo que son los que generan los atrasos</small></left>
<br>

##
<br>
<br>
<br>
<br>
<center><h2>Para analizar el atraso por tramos y horas se utilizaron "boxplots". Ver la siguiente explicación </center></h2>
<img height="96px" width="140px" src="img/boxplots.png" style="background:none; border:none; box-shadow:none;">

##
<img  src="img/boxplot.png" style="background:none; border:none; box-shadow:none;">

##
```{r, echo=FALSE, include=TRUE}
h
```
<br>

<left><small>Veamos el mismo gráfico pero sin valores extremos</small></left>

##
```{r, echo=FALSE, include=TRUE, fig.height=1200}
i
```

## {data-background=#CBF6FF}
<br>
<center><h3>Hasta aquí: 

Las protestas sociales en 4 días del mes produjeron los atrasos mas considerables

Las protestas ocurren en el centro y perjudican a las paradas 1, 2 y 3 

Las protestas afectan a los buses que transitan entre las 11am y 5pm</center></h3>

## {data-background=#CBF6FF}
<br>
<br>
<br>
<center><h2>¿Los atrasos se dan únicamente por protestas sociales?
<br>
<br>
Veamos los tiempos  de recorrido excluyendo los días de las protestas</center></h2>

## 
```{r, echo=FALSE, include=TRUE, fig.height=1200}
noconf
```
<br>
<center><h6>En días "calmados" el tiempo más rápido del Puma Katari es de 51 minutos pero el mas lento de 64 minutos</center></h6>

## {data-background=#CBF6FF}
<br>
<br>
<br>
<br>
<center><h2>¿Cómo identificar los tramos y horas en los que se debn tomar acciones para mejorar el servicio?</center></h2>

##
```{r, echo=FALSE, include=TRUE}
tramos.noconf
```
<br>
<h6>Los tramos Plaza Camacho-Transferencia PUC (1-2) y Cancha Zapata-Curva de Holguín (3-4) son los que tienen mayor variación
<br>
Antes cerciorémonos que los otros tramos no tienen variaciones extremas</h6>

## 
```{r, echo=FALSE, include=TRUE}
tramos.noconf1
```

<small>La mayoría de los buses en estos tramos tienen variaciones de tiempo de menos de un minuto. Los problemas mas serios no están en estos tramos</small>

## {data-background=#CBF6FF}
<br>
<br>
<br>
<br>
<center><h2>Se sabe que los tramos Plaza Camacho-Transferencia PUC (1-2) y Cancha Zapata-Curva de Holguín (3-4) son los que generan los mayores atrasos. Pero, ¿a qué horas?</h2>

##
```{r, echo=FALSE, include=TRUE}
tramos.noconf2
```
<left><small>Los mayores problemas están a horas 7,8,9,13,14,19 y 20</small></left>

##
```{r, echo=FALSE, include=TRUE}
tramos.noconf3
```
<left><small>Las distorsiones de tiempo están claramente a las 7 y 8 de la mañana</small></left>

## {data-background=#CBF6FF}
<br>
<br>
<br>
<br>
<center><h2>El sistema permite determinar el comportamiento de los pasajeros al subir al bus</center></h2>

## 
```{r, echo=FALSE, include=TRUE}
pasajeros
```
<h6>Los pasajeron no contribuyen significativamente al atraso, estos  necesitan 18.01 segundos en promedio 
para subir y bajar del bus</h6>

## {data-background=#CBF6FF}
<br>
<br>
<br>
<br>
<center><h2>Algunos hallazgos</center></h2>

##
<br>
<br>
<br>
<br>
<h1>**77 días**</h1>
<center><h4>Es la suma del tiempo perdido de los pasajeros en los días de protesta</center></h4>
<br>

##
<br>
<br>
<br>
<br>
<h1>**155 días**</h1>
<br>
<center><h4>Es la suma del tiempo perdido de los pasajeros en días normales<center><h4>

## 
<h4>El desafío del sistema es monitorear la transición del modelo azul al rojo: tiempo total del recorrido</h4>
<img  src="img/objetivo.png" style="background:none; border:none; box-shadow:none;">

## {data-background=#CBF6FF}
<br>
<br>
<br>
<br>
<center><h2>El sistema es capaz de retroalimenatar los ajustes y cambios en la operación del servicio</center></h2>

## {data-background=#CBF6FF}
<br>
<br>
<br>
<br>
<center><h2>Propuesta</center></h2>

## 
<img  src="img/propuesta.png" style="background:none; border:none; box-shadow:none;">

##
<img width="240" height="120"  src="img/sensorizar.png" style="background:none; border:none; box-shadow:none;">
<br>
<br>
<h6>-Programar los GPS's de los buses para que cuando pasen cerca de una parada envíen automáticamente los datos a una central de datos</h6>

<h6>-Estimar los requerimientos tecnológicos para sensorizar todas las rutas</h6>

##
<img width="650" height="112"  src="img/conectar.png" style="background:none; border:none; box-shadow:none;">
<br>
<br>
<h6>-Probar el envío en tiempo real de la información de los buses a central de datos</h6>

<h6>-El sistema analizará automáticamente los datos una vez se emitan desde los buses y lleguen hasta la central</h6>



##
<img width="630" height="112"  src="img/google.png" style="background:none; border:none; box-shadow:none;">
<br>
<br>
<h6>-Gestionar el procesamiento de los datos en vivo a google maps para que los usuarios sepan la localización y tiempo de arribo de los buses</h6>

## {data-background=#CBF6FF}
<br>
<br>
<br>
<br>
<br>
<a href="mailto:lopezvalverde.rafael@gmail.com"><i class="fa fa-envelope"></i>  <a href="https://www.linkedin.com/in/rafael-lopez-valverde-a141a325/"><i class="fa fa-linkedin"></i></a>  <a href="https://github.com/rafalopezv"><i class="fa fa-github"></i></a>  <a href="https://twitter.com/rafa_lopezv"><i class="fa fa-twitter"></i></a>  <a href="https://www.facebook.com/profile.php?id=585845584"><i class="fa fa-facebook"></i> </a> <a href="tel:68188223"><i class="fa fa-mobile"></i></a>

<h6><font color="darkblue">rafa lópez v.</font></h6>

## {data-background=#CBF6FF}
<br>
<br>
<img width="180" height="180"  src="img/futura.lab.png" style="background:none; border:none; box-shadow:none;">

<img width="350" height="50"  src="img/comunicadores.png" style="background:none; border:none; box-shadow:none;">






